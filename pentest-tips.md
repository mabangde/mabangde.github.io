---
title: 红队项目笔记
date: 2019-08-20 22:44:17
tags: redteam
author: wolvez                                                                                  
---
#### 0x01 前言
目标系统有疑有流量检测设备及安全防护，导致后门一直被清理

#### 0x02 使用无文件shell


#### 0x03 配置反代
>隐藏c&c连接

[Using Metasploit with Ruse](https://github.com/mabangde/ruse/blob/master/docs/msf-reverse-https.md)



#### 0x04 配置本地msf数据库
```bash
sudo service postgresql restart

sudo su postgres
createuser msf -P -S -R -D;
createdb -O msf msf;
alter user msf with password 'Blackbird';
exit
```

#### 0x04 Metasploit rpc
>思路：本地连接远程Metasploit方便稳定控制，服务器端运行msfrpc

[RPC API](https://metasploit.help.rapid7.com/v1/docs/rpc-api)

远程服务器配置metasploit rpc服务
```
msfrpcd -U pentestlab -P null@github.com -a 0.0.0.0
[*] MSGRPC starting on 0.0.0.0:55553 (SSL):Msg...
[*] MSGRPC backgrounding at 2019-08-20 17:23:13 +0900...
[*] MSGRPC background PID 26331
```

本地加载msgrpc
```
load msgrpc ServerHost=118.27.25.30 ServerPort=55553 User='pentestlab' Pass='null@github.com'
```
